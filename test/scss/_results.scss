// Message Tests
// =============

@include test-module('Results') {

  @include test('Pass and Fail correctly increment results') {
    @include pass;
    @include fail('This is a test of the failure message system.');

    $expected-results: join($pass-marker, $fail-marker, comma);

    @include assert-equal($test-results, $expected-results,
      'Pass/fail results are not being properly tracked.');

    // Fix the results - #2 failing should be reported as a pass.
    $i: 1;
    $new: compact();
    @each $res in $test-results {
      @if $i == 2 and $res == 'f' { $res: 'p'; }
      @else if $i == 2 and $res == 'p' { $res: 'f'; }
      $new: append($new, $res);
      $i: $i + 1;
    }
    $test-results: $new;
  }

}
