// Test Module
// ===========



// Test Module
// -----------
/// Test Modules are optional,
/// and can be used to group tests and other modules
/// for organizational purposes.
/// @access public
/// @group testing
/// @param {string} $name - module name
/// @content Include all the tests & modules that are part of this module
@mixin test-module(
  $name
) {
  @include _true-module-start($name);
  @content;
  @include _true-module-stop;
}



// Module Start
// ------------
/// Module start helper
/// @access private
/// @group private-testing
/// @param {string} $name - module name
@mixin _true-module-start(
  $name
) {
  @include _true-context(module, $name);
  $module-list: _true-context-all('module');
  $modules: nth($module-list, 1);

  $length: length($module-list);

  @if $length > 1 {
    @for $i from 2 through $length {
      $modules: $modules + ' :: ' + nth($module-list, $i);
    }
  }

  @include _true-message('# Module: #{$modules}', 'comments');

  $underline: '----------';

  @for $i from 1 through str-length(inspect($modules)) {
    $underline: '#{$underline}-';
  }

  @include _true-message($underline, 'comments');
}



// Module Stop
// -----------
/// Module stop helper
/// @access private
/// @group private-testing
@mixin _true-module-stop {
  @include _true-update-stats-count('modules');
  @include _true-context-pop;
  @include _true-message('', 'comments');
}
